<!DOCTYPE html>
<html>
  <head>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="assets/favicon.png" />
    <link
      href="https://fonts.googleapis.com/css?family=DM+Sans&display=swap"
      rel="stylesheet"
    />
    <title>Fisheye - photographe</title>
  </head>
  <body>
    <header class="header" role="banner" data-main-page="false">
      <a class="header__index-link" href="/" aria-label="Fisheye Home page">
        <img
          role="img"
          aria-hidden="true"
          src="assets/images/logo.png"
          class="header__logo"
          alt="Fisheye Home page"
        />
      </a>
    </header>
    <main class="main" role="main" data-main-page="true">
      <header class="main__photographer-infos">
        <div class="main__photographer-text">
          <h1 class="main__photographer-title">Mimi Keel</h1>
          <p class="main__photographer-description">
            <span class="main__photographer-location" aria-label="location">
              <span class="main__photographer-city">London</span>,
              <span class="main__photographer-country">UK</span>
            </span>
            <span class="main__photographer-tagline" aria-label="Slogan">
              Voir le beau dans le quotidien
            </span>
          </p>
        </div>
        <button class="btn btn--open">Contactez-moi</button>
        <img
          src="/assets/photographers/MimiKeel.jpg"
          alt="Mimi Keel"
          class="main__photographer-image"
        />
      </header>
      <section class="main__photographer-medias">
        <form action="/" class="main__photographer-filter-form">
          <label
            class="main__photographer-filter-label"
            id="main__photographer-filter-label"
          >
            Trier par
          </label>
          <div
            role="radiogroup"
            aria-labelledby="main__photographer-filter-label"
            class="main__photographer-filter-input"
          >
            <span
              class="main__photographer-filter-choosen-option"
              aria-hidden="true"
              >Popularité</span
            >
            <div
              class="main__photographer-filter-option-display"
              aria-hidden="true"
            >
              <label
                for="option-0"
                class="main__photographer-filter-option-label"
                >Popularité</label
              >
              <input
                id="option-0"
                role="radio"
                tabindex="0"
                aria-checked="true"
                type="radio"
                value="0"
                name="filter"
                checked
                class="main__photographer-filter-option-choice"
              />
              <label
                for="option-1"
                class="main__photographer-filter-option-label"
                >Date</label
              >
              <input
                id="option-1"
                role="radio"
                tabindex="-1"
                aria-checked="false"
                type="radio"
                value="1"
                name="filter"
                class="main__photographer-filter-option-choice"
              />
              <label
                for="option-2"
                class="main__photographer-filter-option-label"
                >Titre</label
              >
              <input
                id="option-2"
                role="radio"
                tabindex="-1"
                aria-checked="false"
                type="radio"
                value="2"
                name="filter"
                class="main__photographer-filter-option-choice"
              />
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="white"
              class="bi bi-chevron-down"
              viewBox="0 0 16 16"
              role="img"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"
              />
            </svg>
          </div>
        </form>
        <div class="main__medias-list" role="list">
          <article class="card-media" role="listitem">
            <a
              href="/media/623534343"
              class="card-media__link"
              data-id="623534343"
              role="link"
              aria-labelledby="card-media__title--623534343"
            >
              <img
                src="assets/works/photos/Travel_Lonesome.jpg"
                alt="Lonesome, closeup view"
                class="card-media__img"
              />
            </a>
            <h3 class="card-media__title" id="card-media__title--623534343">
              Lonesome
            </h3>
            <a
              href="/media/623534343/like"
              class="card-media__like"
              role="link"
              aria-label="Liker l'image"
            >
              <svg
                class="icon-heart icon-heart--filled"
                role="img"
                aria-label="likes"
              >
                <use xlink:href="assets/icons/heart.svg#icon-heart"></use>
              </svg>
            </a>
            <span class="card-media__nb-likes" aria-label="Nombre de likes"
              >88</span
            >
          </article>
        </div>
      </section>
    </main>
    <div
      class="form-modal"
      role="dialog"
      aria-labelledby="#form-modal__title"
      aria-modal="true"
    >
      <header class="form-modal__header">
        <h2 id="form-modal__title" class="form-modal__title">Contactez-moi</h2>
        <img
          src="assets/icons/close.svg"
          class="form-modal__close-btn"
          onclick="closeModal()"
          aria-label="Close"
        />
      </header>
      <form class="form-modal__form">
        <div class="form-modal__input">
          <label class="form-modal__input-label">Prénom</label>
          <input
            class="form-modal__input-field form-modal__input-field--text"
          />
        </div>
        <button class="form-modal__submit-btn btn">Envoyer</button>
      </form>
    </div>
    <script type="text/javascript">
      const changeAriaChecked = (element, value) => {
        element.ariaChecked = value;
        element.setAttribute('aria-checked', value);

        const id = element.getAttribute('id');

        const label = document.querySelector(`label[for="${id}"]`);

        value
          ? label.setAttribute('style', 'grid-row: 1 / 2')
          : label.style.removeProperty('grid-row');
      };
      const changeSortingOption = element => {
        // Modify the aria-checked parameter of the element
        changeAriaChecked(element, true);

        // Change the position of the element in the list
        element.style.gridRow = '1 / 2';

        // Get the id of the element and the label of the element
        const id = element.getAttribute('id');
        const label = document.querySelector(`label[for="${id}"]`);

        // Modify the choosen option displayed in the page
        document.querySelector(
          '.main__photographer-filter-choosen-option'
        ).textContent = label.textContent;
      };
      window.addEventListener('load', event => {
        // Retrieve the checked element
        const checkedElement = document.querySelector(
          '.main__photographer-filter-option-choice[aria-checked="true"]'
        );
        // Display and store the datas of the element
        changeSortingOption(checkedElement);
      });

      document.addEventListener('mouseup', event => {
        const target = event.target.closest('.main__photographer-filter-input');
        const filterEl = document.querySelector(
          '.main__photographer-filter-input'
        );
        if (!filterEl) return;

        filterEl.dataset.clicked = target === filterEl ? true : false;
      });
      document
        .querySelectorAll('.main__photographer-filter-option-choice')
        .forEach(element => {
          element.addEventListener('change', event => {
            const element = event.target;
            const checkedElement = document.querySelector(
              '.main__photographer-filter-option-choice[aria-checked="true"]'
            );
            const filterEl = document.querySelector(
              '.main__photographer-filter-input'
            );
            if (!filterEl || !checkedElement) return;

            if (element !== checkedElement) {
              changeAriaChecked(checkedElement, false);

              changeSortingOption(element);
            }

            filterEl.dataset.clicked = false;
          });
        });
    </script>
  </body>
</html>
